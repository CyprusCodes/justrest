"use strict";(self.webpackChunkdocumentation=self.webpackChunkdocumentation||[]).push([[6720],{3905:function(e,n,t){t.d(n,{Zo:function(){return s},kt:function(){return m}});var a=t(7294);function o(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function i(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function r(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?i(Object(t),!0).forEach((function(n){o(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):i(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function p(e,n){if(null==e)return{};var t,a,o=function(e,n){if(null==e)return{};var t,a,o={},i=Object.keys(e);for(a=0;a<i.length;a++)t=i[a],n.indexOf(t)>=0||(o[t]=e[t]);return o}(e,n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)t=i[a],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(o[t]=e[t])}return o}var l=a.createContext({}),c=function(e){var n=a.useContext(l),t=n;return e&&(t="function"==typeof e?e(n):r(r({},n),e)),t},s=function(e){var n=c(e.components);return a.createElement(l.Provider,{value:n},e.children)},d={inlineCode:"code",wrapper:function(e){var n=e.children;return a.createElement(a.Fragment,{},n)}},u=a.forwardRef((function(e,n){var t=e.components,o=e.mdxType,i=e.originalType,l=e.parentName,s=p(e,["components","mdxType","originalType","parentName"]),u=c(t),m=o,g=u["".concat(l,".").concat(m)]||u[m]||d[m]||i;return t?a.createElement(g,r(r({ref:n},s),{},{components:t})):a.createElement(g,r({ref:n},s))}));function m(e,n){var t=arguments,o=n&&n.mdxType;if("string"==typeof e||o){var i=t.length,r=new Array(i);r[0]=u;var p={};for(var l in n)hasOwnProperty.call(n,l)&&(p[l]=n[l]);p.originalType=e,p.mdxType="string"==typeof e?e:o,r[1]=p;for(var c=2;c<i;c++)r[c]=t[c];return a.createElement.apply(null,r)}return a.createElement.apply(null,t)}u.displayName="MDXCreateElement"},8997:function(e,n,t){t.r(n),t.d(n,{frontMatter:function(){return p},contentTitle:function(){return l},metadata:function(){return c},toc:function(){return s},default:function(){return u}});var a=t(7462),o=t(3366),i=(t(7294),t(3905)),r=["components"],p={id:"deployment",title:"Deploying AWE Applications",sidebar_label:"Deployment"},l=void 0,c={unversionedId:"deployment",id:"deployment",isDocsHomePage:!1,title:"Deploying AWE Applications",description:"Intro",source:"@site/docs/deployment.md",sourceDirName:".",slug:"/deployment",permalink:"/docs/deployment",editUrl:"https://github.com/CyprusCodes/xest/tree/main/documentation/docs/docs/deployment.md",tags:[],version:"current",frontMatter:{id:"deployment",title:"Deploying AWE Applications",sidebar_label:"Deployment"}},s=[{value:"Intro",id:"intro",children:[],level:2},{value:"Deploying in Java Archive (JAR) as a standalone application",id:"deploying-in-java-archive-jar-as-a-standalone-application",children:[],level:2},{value:"Deploying in application server",id:"deploying-in-application-server",children:[],level:2},{value:"Deploying in Docker Container",id:"deploying-in-docker-container",children:[],level:2},{value:"Deploying in the CLOUD",id:"deploying-in-the-cloud",children:[],level:2}],d={toc:s};function u(e){var n=e.components,t=(0,o.Z)(e,r);return(0,i.kt)("wrapper",(0,a.Z)({},d,t,{components:n,mdxType:"MDXLayout"}),(0,i.kt)("h2",{id:"intro"},"Intro"),(0,i.kt)("p",null,"Awe framework same as Spring Boot apps, has flexible packaging options provide a great deal of choice when it comes to deploying your application. You can deploy Awe applications to a variety of cloud platforms, to container images (such as Docker), or to virtual/real machines."),(0,i.kt)("p",null,"This section covers some of the more common deployment scenarios."),(0,i.kt)("h2",{id:"deploying-in-java-archive-jar-as-a-standalone-application"},"Deploying in Java Archive (JAR) as a standalone application"),(0,i.kt)("p",null,"Awe applications can easily be packaged into JAR files and deployed as standalone applications. This is done by the ",(0,i.kt)("inlineCode",{parentName:"p"},"spring-boot-maven-plugin"),". The plugin is automatically added to pom.xml using ",(0,i.kt)("inlineCode",{parentName:"p"},"awe-boot-archetype")," maven archetype."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-xml"},"<build>\n  <plugins>\n    <plugin>\n      <groupId>org.springframework.boot</groupId>\n      <artifactId>spring-boot-maven-plugin</artifactId>\n    </plugin>\n  </plugins>\n</build>\n")),(0,i.kt)("p",null,"In order to package the application in a single (fat) jar file, run the maven command mvn package under project directory. This will package the application inside an executable jar file with all its dependencies (including the embedded servlet container \u2014 if its a web application). To run the jar file, use the following standard JVM command ",(0,i.kt)("inlineCode",{parentName:"p"},"java -jar <jar-file-name>.jar"),"."),(0,i.kt)("h2",{id:"deploying-in-application-server"},"Deploying in application server"),(0,i.kt)("p",null,"If you are running your application in an Application server like Apache Tomcat, Jboss, Websphere, ... you have to do a little changes in your pom.xml."),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"Modify your ",(0,i.kt)("inlineCode",{parentName:"li"},"pom.xml")," to generate a WAR package instead of a JAR")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-xml"},"<packaging>war</packaging>\n")),(0,i.kt)("ol",{start:2},(0,i.kt)("li",{parentName:"ol"},"Exclude the embedded tomcat by marking its scope as ",(0,i.kt)("inlineCode",{parentName:"li"},"provided"))),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-xml"},"<dependency> \n  <groupId>org.springframework.boot</groupId>\n  <artifactId>spring-boot-starter-tomcat</artifactId>\n  <scope>provided</scope>\n</dependency>\n")),(0,i.kt)("ol",{start:3},(0,i.kt)("li",{parentName:"ol"},"Modify your main class ",(0,i.kt)("inlineCode",{parentName:"li"},"AppBootApplication.java")," to start the application in a stand-alone servlet container.")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-java"},"\n@SpringBootApplication\npublic class AppBootApplication extends SpringBootServletInitializer {\n\n  private static Class<AppBootApplication> applicationClass = AppBootApplication.class;\n\n  @Override\n  protected SpringApplicationBuilder configure(SpringApplicationBuilder application) {\n    return application.sources(applicationClass);\n  }\n\n  /**\n   * The goal of this method is only for running the application as a standalone\n   * application, setting up an embedded Tomcat server.\n   *\n   * @param args Application arguments\n   */\n  public static void main(String[] args) {\n    SpringApplication.run(AppBootApplication.class, args);\n  }\n}\n")),(0,i.kt)("h2",{id:"deploying-in-docker-container"},"Deploying in Docker Container"),(0,i.kt)("p",null,"Before deploying the application into a Docker container, we will first package the application in a (fat) JAR file. This process is previously explained, therefore I will assume we have a jar file.\nOn the first step, we need to build a container image. For this, we start with creating a Dockerfile in the project root directory as follows:"),(0,i.kt)("p",null,"For example:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-shell",metastring:"script",script:!0},'# Use an official Open jdk runtime as a parent image\nFROM openjdk:8-jdk-alpine\n# Copy the current directory contents into the container at /app\nADD target/awe-demo.jar awe-demo.jar\n# Volume of app logs\nVOLUME /logs\n# Volume of app data\nVOLUME /tmp\n# expose server port accept connections\nEXPOSE 8080\n# Execute jar\nENTRYPOINT ["java", "-Dspring.devtools.restart.enabled=false", "-Djava.security.egd=file:/dev/./urandom", "-jar", "/awe-demo.jar"]\n')),(0,i.kt)("h2",{id:"deploying-in-the-cloud"},"Deploying in the CLOUD"),(0,i.kt)("p",null,"Awe apps same as Spring Boot\u2019s executable jars are ready-made for most popular cloud PaaS (Platform-as-a-Service) providers. These providers tend to require that you \u201cbring your own container\u201d. They manage application processes (not Java applications specifically), so they need an intermediary layer that adapts your application to the cloud\u2019s notion of a running process."),(0,i.kt)("p",null,"Ideally, your application, like a Spring Boot executable jar, has everything that it needs to run packaged within it."),(0,i.kt)("div",{className:"admonition admonition-tip alert alert--success"},(0,i.kt)("div",{parentName:"div",className:"admonition-heading"},(0,i.kt)("h5",{parentName:"div"},(0,i.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,i.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"}))),"Info")),(0,i.kt)("div",{parentName:"div",className:"admonition-content"},(0,i.kt)("p",{parentName:"div"},"You can read more docs about deploying ",(0,i.kt)("strong",{parentName:"p"},(0,i.kt)("a",{parentName:"strong",href:"https://docs.spring.io/spring-boot/docs/current/reference/html/deployment.html#cloud-deploymenta"},"here"))))))}u.isMDXComponent=!0}}]);